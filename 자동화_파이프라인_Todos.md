# 🎬 회화비디오 자동화 파이프라인 구현 Todos

## 📋 **프로젝트 개요**
자동화 파이프라인 문서를 기반으로 완전 자동화된 회화비디오 생성 시스템 구현

---

## 🚀 **Phase 1: 핵심 인프라 구축**

### **1.1 Manifest 시스템 구현**
- [ ] `timeline_manifest.json` 파일 구조 정의 및 검증
- [ ] Manifest 파서 클래스 구현 (`ManifestParser`)
- [ ] Scene 타입별 검증 로직 구현
- [ ] Manifest 파일 자동 생성 UI 구현

### **1.2 오디오 생성 시스템**
- [ ] SSML 기반 TTS 통합 (`AudioGenerator`)
- [ ] `<mark>` 태그를 활용한 타임스탬프 추출
- [ ] 화자별 음성 생성 및 무음 간격 처리
- [ ] 마스터 오디오 파일 생성 (`_master.mp3`)
- [ ] 세그먼트 타이밍 파일 생성 (`_segments.json`)

### **1.3 자막 이미지 생성 시스템**
- [ ] 타입별 자막 생성 로직 구현
  - [ ] `intro`/`ending`: 스마트 줄바꿈 로직
  - [ ] `conversation`: 2화면 렌더링 (원어/학습어)
  - [ ] `dialogue`: 화자별 대사 렌더링
- [ ] PNG 시퀀스 자동 생성
- [ ] 텍스트 설정 적용 (폰트, 크기, 색상, 위치)

---

## 🎯 **Phase 2: 비디오 렌더링 시스템**

### **2.1 FFmpeg 통합**
- [ ] 동적 FFmpeg 스크립트 생성기 구현
- [ ] `overlay` 필터를 활용한 자막 합성
- [ ] 세그먼트 타이밍 기반 정확한 자막 배치
- [ ] 배경 비디오/이미지 처리

### **2.2 타임라인 관리**
- [ ] Scene별 타임라인 계산
- [ ] 자막 표시/숨김 타이밍 제어
- [ ] 오디오-비디오 동기화

---

## 🖥️ **Phase 3: UI/UX 구현**

### **3.1 Manifest 편집기**
- [ ] Scene 추가/삭제/순서 변경 UI
- [ ] 타입별 속성 편집 폼
- [ ] 실시간 검증 및 오류 표시
- [ ] 템플릿 기반 빠른 생성

### **3.2 파이프라인 제어**
- [ ] 단계별 실행 상태 표시
- [ ] 진행률 바 및 로그 뷰어
- [ ] 오류 발생 시 롤백 기능
- [ ] 배치 처리 지원

### **3.3 미리보기 시스템**
- [ ] 실시간 자막 미리보기
- [ ] 오디오 웨이브폼 표시
- [ ] 최종 비디오 미리보기

---

## 🔧 **Phase 4: 고급 기능**

### **4.1 템플릿 시스템**
- [ ] 자주 사용하는 Scene 패턴 저장
- [ ] 프로젝트별 템플릿 관리
- [ ] 커뮤니티 템플릿 공유

### **4.2 품질 최적화**
- [ ] 자동 품질 체크 (해상도, 오디오 품질)
- [ ] 최적화 권장사항 제공
- [ ] 배치 렌더링 최적화

### **4.3 확장성**
- [ ] 플러그인 시스템 설계
- [ ] 외부 TTS 서비스 연동
- [ ] 클라우드 렌더링 지원

---

## 📁 **파일 구조 설계**

```
src/
├── pipeline/
│   ├── manifest/
│   │   ├── parser.py          # Manifest 파서
│   │   ├── validator.py       # 검증 로직
│   │   └── generator.py       # 자동 생성
│   ├── audio/
│   │   ├── generator.py       # TTS 통합
│   │   ├── ssml_builder.py    # SSML 생성
│   │   └── segmenter.py       # 세그먼트 추출
│   ├── subtitle/
│   │   ├── renderer.py        # 자막 렌더링
│   │   ├── types/            # 타입별 로직
│   │   └── smart_wrap.py     # 줄바꿈 알고리즘
│   ├── video/
│   │   ├── renderer.py        # FFmpeg 통합
│   │   ├── timeline.py        # 타임라인 관리
│   │   └── composer.py        # 최종 합성
│   └── orchestrator.py        # 전체 파이프라인 제어
├── ui/
│   ├── manifest_editor.py     # Manifest 편집기
│   ├── pipeline_control.py    # 파이프라인 제어
│   └── preview.py            # 미리보기
└── utils/
    ├── ffmpeg_wrapper.py      # FFmpeg 래퍼
    └── quality_checker.py     # 품질 검사
```

---

## 🎯 **우선순위**

### **High Priority (1-2주)**
1. Manifest 시스템 기본 구조
2. 오디오 생성 및 타임스탬프 추출
3. 기본 자막 이미지 생성

### **Medium Priority (3-4주)**
1. FFmpeg 통합 및 비디오 렌더링
2. 기본 UI 구현
3. 파이프라인 제어 시스템

### **Low Priority (5-8주)**
1. 고급 기능 및 최적화
2. 템플릿 시스템
3. 확장성 및 플러그인

---

## 🧪 **테스트 계획**

### **단위 테스트**
- [ ] Manifest 파싱 및 검증
- [ ] 오디오 생성 및 세그먼트 추출
- [ ] 자막 렌더링 각 타입별

### **통합 테스트**
- [ ] 전체 파이프라인 실행
- [ ] 오류 처리 및 복구
- [ ] 성능 및 메모리 사용량

### **사용자 테스트**
- [ ] UI/UX 사용성
- [ ] 다양한 프로젝트 타입 지원
- [ ] 오류 상황 대응

---

## 📊 **성공 지표**

- [ ] Manifest 파일 하나로 전체 비디오 생성 가능
- [ ] 5분 영상 기준 10분 이내 자동 생성
- [ ] 사용자 개입 최소화 (1-2번 클릭)
- [ ] 다양한 언어 및 화자 지원
- [ ] 품질 손실 없는 자동화

---

## 🔍 **현재 상태 분석**

### **이미 구현된 기능**
- ✅ 기본 TTS 시스템
- ✅ 이미지 생성 시스템
- ✅ 기본 비디오 렌더링

### **구현해야 할 기능**
- ❌ Manifest 기반 파이프라인
- ❌ 자동화된 Scene 처리
- ❌ 타임라인 기반 렌더링
- ❌ 통합된 UI/UX

---

## 💡 **다음 단계**

1. **Manifest 시스템 설계 및 구현 시작**
2. **기존 코드와의 통합 방안 검토**
3. **단계별 구현 계획 수립**
4. **프로토타입 개발 및 테스트**

이 Todo 리스트를 기반으로 체계적으로 개발을 진행하면 완전 자동화된 회화비디오 생성 시스템을 구축할 수 있습니다.
