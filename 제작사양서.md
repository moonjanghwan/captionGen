# AI 기반 다국어 학습 오디오 자동화 시스템 제작사양서

## 1. 프로젝트 개요

### 1.1 프로젝트명
**AI 기반 다국어 학습 오디오 자동화 시스템 (AI-Powered Multilingual Learning Audio Automation System)**

### 1.2 프로젝트 목적
AI가 주어진 주제와 개수에 따라 학습 데이터를 자동 생성하고, Google Cloud Text-to-Speech API를 활용하여 다국어 학습용 오디오 파일을 자동으로 생성하는 데스크톱 애플리케이션

### 1.3 주요 기능
- AI 기반 학습 데이터 자동 생성 (주제별, 개수별)
- 다국어 TTS(Text-to-Speech) 음성 합성
- 다양한 화자 선택 및 미리듣기 기능
- 오디오 파일 자동 생성 및 결합
- 사용자 친화적인 GUI 인터페이스
- 고급 오디오 제어 기능 (녹음, 재생, 일시정지, 정지)
- **유튜브 회화용 PPT 자동 생성**
- **SRT 자막 파일 자동 생성**
- **비디오 제작 워크플로우 지원**

### 1.4 개발 기간
2025년 4월 1일 기준 최종 버전 완성

## 2. 시스템 아키텍처

### 2.1 전체 구조
```
youtube_audio_system/
├── main.py                 # 메인 진입점
├── app.py                  # Flask 웹 서버 (음성 녹음)
├── config/                 # 설정 관리
│   ├── constants.py        # 상수 정의
│   └── settings_manager.py # 설정 저장/로드
├── api/                    # 외부 API 연동
│   ├── ai_data_generator.py # AI 데이터 생성 API
│   └── google_tts.py       # Google TTS API
├── ui/                     # 사용자 인터페이스
│   ├── main_window.py      # 메인 윈도우
│   ├── data_source_tab.py  # AI 데이터 소스 탭
│   ├── speaker_tab.py      # 화자 선택 탭
│   ├── output_tab.py       # 출력 설정 탭
│   ├── ppt_generator_tab.py # PPT 생성 탭
│   └── srt_generator_tab.py # SRT 생성 탭
├── utils/                  # 유틸리티
│   ├── audio_processor.py  # 오디오 처리
│   ├── data_models.py      # 데이터 모델
│   └── helpers.py          # 헬퍼 함수
├── static/                 # 웹 정적 파일
├── templates/              # HTML 템플릿
├── output/                 # 출력 파일
└── temp/                   # 임시 파일
```

### 2.2 기술 스택

#### 2.2.1 프로그래밍 언어
- **Python 3.6+**

#### 2.2.2 주요 라이브러리
- **customtkinter**: 모던한 GUI 인터페이스
- **google-cloud-texttospeech**: Google TTS API 클라이언트
- **pydub**: 오디오 파일 처리
- **pygame**: 오디오 재생
- **flask**: 웹 서버 (음성 녹음)
- **sounddevice**: 실시간 음성 녹음
- **Pillow**: 이미지 처리
- **python-pptx**: PowerPoint 파일 생성

#### 2.2.3 외부 API
- **Google Cloud Text-to-Speech API**: 음성 합성
- **AI 데이터 생성 엔진**: 학습 데이터 자동 생성

## 3. 주요 기능 상세

### 3.1 AI 데이터 생성 시스템

#### 3.1.1 AI 데이터 생성
- 주제 입력을 통한 학습 데이터 자동 생성
- 개수 선택 (5, 10, 15, 20, 25, 30개)
- 실시간 데이터 생성 및 테이블 표시
- 다양한 주제별 학습 데이터 템플릿
- **선택된 화자 언어에 맞는 데이터 자동 생성**

#### 3.1.2 지원 데이터 형식
```
| 순번 | 원어(주언어) | 학습어(보조언어) | 읽기(학습어를 주언어로 읽기) |
|------|--------------|------------------|------------------------------|
| 1    | 안녕하세요   | Hello            | 헬로                         |
| 2    | 감사합니다   | Thank you        | 땡큐                         |
```

#### 3.1.3 지원 주제 카테고리
- **일상회화**: 기본적인 일상 대화
- **비즈니스**: 업무 관련 대화
- **여행**: 여행 관련 표현

#### 3.1.4 지원 언어 조합
- **한국어-영어 (ko-KR, en-US)**: 기본 언어 조합
- **한국어-일본어 (ko-KR, ja-JP)**: 일본어 학습용
- **한국어-중국어 (ko-KR, zh-CN)**: 중국어 학습용
- **한국어-이탈리아어 (ko-KR, it-IT)**: 이탈리아어 학습용
- **기타 언어 조합**: 기본 한국어-영어 데이터로 대체

### 3.2 다국어 TTS 시스템

#### 3.2.1 지원 언어
- **한국어 (ko-KR)**: 주 언어
- **영어: en-US**
- **일본어 (ja-JP)**
- **중국어: cmn-CN**
- **베트남어 (vi-VN)**
- **인도네시아어 (id-ID)**
- **이탈리아어 (it-IT)**
- **스페인어 (es-US)**
- **프랑스어 (fr-FR)**
- **독일어 (de-DE)**

#### 3.2.2 화자 선택
- 주 언어: 1명의 화자 선택
- 보조 언어: 최대 4명의 화자 선택 가능
- 화자별 미리듣기 기능
- 화자 목록 캐싱 (1시간)

### 3.3 오디오 처리 및 제어

#### 3.3.1 오디오 생성
- Google TTS API를 통한 실시간 음성 합성
- 다중 화자 음성 결합
- 사용자 정의 묵음 간격 설정
- MP3 형식 출력
- **진행바를 통한 실시간 진행상황 표시**

#### 3.3.2 고급 오디오 제어
- **오디오 생성/저장**: AI 생성된 데이터로 TTS 오디오 생성하여 지정된 폴더에 MP3 파일로 저장
  - 진행바로 진행상황을 실시간으로 표시
  - 각 단계별 진행률 업데이트 (TTS 생성, 오디오 결합, 파일 저장)
- **재생(전체 미리듣기)**: AI 생성된 데이터를 순차적으로 읽어 재생
  - 원어 → 학습어1 → 학습어2 → 학습어3 → 학습어4 순서로 재생
  - 각 텍스트 사이에 설정된 일시정지 시간 적용
- **파일 재생(저장된 파일 재생)**: 선택된 파일을 읽어서 재생
  - 일시정지/재시작 기능 포함
  - 재시작 시 일시정지된 지점에서 다시 시작
- **일시 정지**: 현재 읽고 있는 것을 중지, 재시작 시 거기서 다시 시작
- **정지**: 현재 읽거나 녹음 중인 모든 기능을 정지하고 초기 상태로 돌아가기

#### 3.3.3 오디오 후처리
- 오디오 정규화
- 묵음 구간 삽입
- 파일 결합 및 최적화
- 진행상황 모니터링 및 사용자 피드백

### 3.4 유튜브 비디오 제작 시스템


#### 3.4.1 SRT 자막 생성 시스템
- **원어만 표시**: 기본 자막 형식
- **원어 + 학습어 표시**: 이중 언어 자막
- **원어 + 학습어 + 읽기 표시**: 완전한 학습용 자막
- **타이밍 설정**: 각 텍스트 지속 시간 및 간격 조정
- **SRT 표준 형식**: HH:MM:SS,mmm 시간 형식 지원

#### 3.4.2 파일 관리 시스템
- **자동 디렉토리 생성**: output/ppt, output/srt
- **파일 목록 관리**: 생성된 파일 미리보기 및 관리
- **더블클릭 열기**: 시스템 기본 프로그램으로 파일 열기
- **진행상황 표시**: 실시간 생성 진행률 모니터링

### 3.5 사용자 인터페이스

#### 3.5.1 메인 윈도우
- **크기**: 900x800 픽셀
- **테마**: CustomTkinter 모던 테마
- **탭 구조**: 데이터 소스, 화자 선택, 이미지 설정

#### 3.5.2 주요 컨트롤
- AI 데이터 생성 버튼
- 녹음(오디오 생성/저장) 버튼
- 재생(전체 미리듣기) 버튼
- 파일 재생(저장된 파일 재생) 버튼
- 일시 정지 버튼
- 정지 버튼
- 진행률 표시바

### 3.5 웹 기반 음성 녹음

#### 3.5.1 Flask 웹 서버
- 실시간 음성 녹음 인터페이스
- WAV 형식 녹음 파일 저장
- 44.1kHz 스테레오 품질

## 4. 설정 및 구성

### 4.1 기본 설정

#### 4.1.1 상수 정의 (constants.py)
```python
# 기본 설정값
DEFAULT_TOPIC = "일상회화"
DEFAULT_DATA_COUNT = 10
DEFAULT_PAUSE_DURATION_S = 1.0
DEFAULT_OUTPUT_DIR = "./output"
DEFAULT_PRIMARY_LANG = "ko-KR"
DEFAULT_SECONDARY_LANG = "en-US"
```

#### 4.1.2 설정 파일
- **audio_automation_settings.json**: 사용자 설정 저장
- 자동 저장/로드 기능
- 마지막 사용 설정 복원

### 4.2 인증 설정

#### 4.2.1 Google API 인증
- 환경 변수 `GOOGLE_APPLICATION_CREDENTIALS` 우선 사용
- 서비스 계정 키 파일 (`credentials/service_account.json`)
- OAuth 2.0 클라이언트 인증 지원

#### 4.2.2 필요 권한
- Google Cloud Text-to-Speech API: 음성 합성

## 5. 성능 및 최적화

### 5.1 캐싱 시스템
- **화자 목록 캐싱**: 1시간 유지
- **AI 데이터 캐싱**: 주제별 데이터 캐싱
- **API 호출 최적화**: 중복 요청 방지
- **임시 파일 관리**: 자동 정리

### 5.2 오류 처리
- **재시도 메커니즘**: 최대 3회 재시도
- **API 할당량 관리**: 초과 시 대기
- **네트워크 오류 복구**: 자동 재연결

### 5.3 리소스 관리
- **메모리 최적화**: 대용량 오디오 스트리밍 처리
- **임시 파일 정리**: 프로세스 종료 시 자동 삭제
- **스레드 관리**: UI 응답성 보장

## 6. 설치 및 배포

### 6.1 시스템 요구사항
- **운영체제**: Windows, macOS, Linux
- **Python**: 3.6 이상
- **메모리**: 최소 4GB RAM
- **저장공간**: 최소 1GB 여유 공간
- **네트워크**: 인터넷 연결 필수

### 6.2 설치 과정
1. Python 환경 설정
2. 의존성 라이브러리 설치 (`pip install -r requirements.txt`)
3. Google Cloud 프로젝트 설정
4. API 키 및 인증 정보 설정
5. 애플리케이션 실행 (`python main.py`)

### 6.3 배포 방식
- **소스 코드 배포**: GitHub 저장소
- **실행 파일**: PyInstaller를 통한 바이너리 생성 가능
- **Docker**: 컨테이너화 배포 지원

## 7. 보안 고려사항

### 7.1 API 키 보안
- 환경 변수를 통한 키 관리
- 소스 코드에 하드코딩 금지
- 서비스 계정 키 파일 보안 저장

### 7.2 데이터 보안
- 임시 파일 자동 삭제
- 네트워크 통신 암호화 (HTTPS)
- 사용자 데이터 로컬 저장 최소화

## 8. 유지보수 및 확장성

### 8.1 모듈화 설계
- 각 기능별 독립적인 모듈 구성
- API 변경에 대한 유연한 대응
- 새로운 언어 추가 용이성

### 8.2 로깅 및 디버깅
- 상세한 오류 로그 기록
- 디버그 모드 지원
- 성능 모니터링 기능

### 8.3 향후 확장 계획
- 추가 TTS 엔진 지원
- 음성 품질 개선 옵션
- 배치 처리 기능 강화
- 클라우드 저장소 연동

## 9. 사용자 가이드

### 9.1 기본 사용법
1. 애플리케이션 실행
2. AI 데이터 소스 탭에서 주제와 개수 설정
3. 화자 선택 탭에서 음성 설정
4. 출력 설정 탭에서 저장 옵션 설정
5. AI 데이터 생성 실행
6. 오디오 생성 및 제어

### 9.2 문제 해결
- **인증 오류**: API 키 및 권한 확인
- **네트워크 오류**: 인터넷 연결 상태 확인
- **음성 품질 문제**: 화자 및 언어 설정 재확인

## 10. 구현 TODO 리스트

### 🔥 **Phase 1: AI 데이터 생성 API 구현 (우선순위: 높음)**

#### 1.1 AI 데이터 생성 모듈 생성
- [ ] `api/ai_data_generator.py` 파일 생성
- [ ] 주제와 개수를 받아서 학습 데이터 생성하는 함수 구현
- [ ] 데이터 형태: `순번, 원어(주언어), 학습어(보조언어), 읽기(학습어를 주언어로 읽기)`
- [ ] 다양한 주제별 학습 데이터 템플릿 구현 (일상회화, 비즈니스, 여행 등)

#### 1.2 AI 데이터 구조 정의
- [ ] `utils/data_models.py` 파일 생성
- [ ] 학습 데이터 클래스 정의
- [ ] 데이터 검증 및 정규화 함수 구현

### 🎨 **Phase 2: UI 수정 (우선순위: 높음)**

#### 2.1 데이터 소스 탭 수정
- [ ] `ui/data_source_tab.py` 수정
- [ ] Google Sheets 관련 UI 요소 제거/비활성화
- [ ] AI 데이터 생성 UI 추가:
  - [ ] 주제 입력 필드 (예: "일상회화", "비즈니스", "여행")
  - [ ] 개수 선택 드롭다운 (5, 10, 15, 20, 25, 30개)
  - [ ] "AI 데이터 생성" 버튼
  - [ ] 데이터 미리보기 테이블 수정 (순번, 원어, 학습어, 읽기 컬럼)

#### 2.2 메인 윈도우 수정
- [ ] `ui/main_window.py` 수정
- [ ] Google Sheets 로드 함수를 AI 데이터 생성 함수로 변경
- [ ] 데이터 표시 로직 수정

### 🔊 **Phase 3: 오디오 제어 기능 개선 (우선순위: 중간)**

#### 3.1 오디오 제어 버튼 개선
- [ ] 기존 버튼 기능 개선:
  - [ ] "녹음(오디오 생성/저장)" - AI 생성된 데이터로 TTS 오디오 생성
  - [ ] "재생(전체 미리듣기)" - 생성된 오디오 전체 재생
  - [ ] "파일 재생(저장된 파일 재생)" - 저장된 파일 재생
  - [ ] "일시 정지" - 재생 중 일시 정지
  - [ ] "정지" - 재생 완전 정지

#### 3.2 오디오 처리 개선
- [ ] `utils/audio_processor.py` 수정
- [ ] 개별 문장별 오디오 생성 기능
- [ ] 전체 오디오 통합 기능
- [ ] 재생 제어 기능 (일시정지, 정지, 재시작)

### 🧹 **Phase 4: 기존 코드 정리 (우선순위: 낮음)**

#### 4.1 Google Sheets 연동 정리
- [ ] `api/google_sheets.py` 비활성화 또는 제거
- [ ] 관련 설정 및 UI 요소 정리
- [ ] 에러 처리 수정

#### 4.2 설정 관리 수정
- [ ] `config/settings_manager.py` 수정
- [ ] AI 데이터 생성 관련 설정 추가
- [ ] 기존 Google Sheets 설정 정리

### 📁 **Phase 5: 파일 구조 및 출력 (우선순위: 낮음)**

#### 5.1 출력 파일 관리
- [ ] AI 생성 데이터별 폴더 구조
- [ ] 오디오 파일 명명 규칙 정의
- [ ] 메타데이터 파일 생성 (JSON/CSV)

#### 5.2 로그 및 에러 처리
- [ ] AI 데이터 생성 로그 추가
- [ ] 오디오 처리 로그 개선
- [ ] 사용자 친화적 에러 메시지

### 🧪 **Phase 6: 테스트 및 최적화 (우선순위: 낮음)**

#### 6.1 기능 테스트
- [ ] AI 데이터 생성 테스트
- [ ] 오디오 제어 기능 테스트
- [ ] UI 동작 테스트

#### 6.2 성능 최적화
- [ ] 대용량 데이터 처리 최적화
- [ ] 메모리 사용량 최적화
- [ ] UI 응답성 개선

## 11. 라이선스 및 저작권

### 11.1 오픈소스 라이브러리
- 사용된 모든 오픈소스 라이브러리의 라이선스 준수
- 각 라이브러리별 저작권 고지

### 11.2 Google API 사용 약관
- Google Cloud Platform 서비스 약관 준수
- API 사용량 제한 및 요금 정책 확인

---

**문서 버전**: 2.0  
**최종 수정일**: 2025년 4월 2일  
**작성자**: 시스템 개발팀  
**주요 변경사항**: Google Sheets 연동 제거, AI 기반 데이터 생성 시스템 추가, 고급 오디오 제어 기능 추가